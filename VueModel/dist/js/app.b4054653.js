(function(e){function t(t){for(var n,r,l=t[0],i=t[1],d=t[2],u=0,p=[];u<l.length;u++)r=l[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);c&&c(t);while(p.length)p.shift()();return a.push.apply(a,d||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,l=1;l<o.length;l++){var i=o[l];0!==s[i]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=o[0]))}return e}var n={},s={app:0},a=[];function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=n,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var c=i;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"4afc":function(e,t,o){"use strict";var n=o("58dd"),s=o.n(n);s.a},"56d7":function(e,t,o){"use strict";o.r(t);var n=o("2b0e"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},a=[],r={name:"app"},l=r,i=o("2877"),d=Object(i["a"])(l,s,a,!1,null,null,null),c=d.exports,u=o("8c4f"),p=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.isManager?o("span",[e._v("Now you see me")]):e._e()])},h=[],m={name:"StartPage",created(){let e=localStorage.getItem("token"),t=e.split(".")[1],o=window.atob(t),n=JSON.parse(o),s=n["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];"Manager"==s?this.isManager=!0:"Model"==s&&(this.isModel=!0)},data:function(){return{isManager:!1,isModel:!1}}},f=m,b=Object(i["a"])(f,p,h,!1,null,null,null),v=b.exports,_=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"home",attrs:{id:"login"}},[o("h1",[e._v("Welcome to Model Management")]),o("p",[e._v("First you need to login")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.input.username,expression:"input.username"}],attrs:{type:"text",name:"username",placeholder:"Username"},domProps:{value:e.input.username},on:{input:function(t){t.target.composing||e.$set(e.input,"username",t.target.value)}}}),o("br"),o("br"),o("input",{directives:[{name:"model",rawName:"v-model",value:e.input.password,expression:"input.password"}],attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:e.input.password},on:{input:function(t){t.target.composing||e.$set(e.input,"password",t.target.value)}}}),o("br"),o("br"),o("button",{attrs:{type:"button"},on:{click:function(t){e.login()}}},[e._v("Login")])])},g=[],w={name:"Home",props:{},data(){return{input:{username:"",password:""}}},methods:{login(){""!=this.input.username&&""!=this.input.password&&fetch("https://localhost:44368/api/Account/login",{method:"POST",body:JSON.stringify({email:this.input.username,password:this.input.password}),headers:new Headers({"Content-Type":"application/json"})}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");e.json().then(t=>{e.status&&localStorage.setItem("token",t.jwt),this.$router.push("/jobs")})})}}},y=w,j=(o("4afc"),Object(i["a"])(y,_,g,!1,null,"722b958d",null)),M=j.exports,k=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"jobs",attrs:{id:"list"}},[o("h1",[e._v("Jobs")]),e._m(0),e._l(e.jobList,function(t){return o("div",{key:t.id,on:{click:function(o){e.updateSelectedJob(t)}}},[o("table",[o("tr",[o("td",[e._v(e._s(t.customer))]),o("td",[e._v(e._s(t.startDate))]),o("td",[e._v(e._s(t.days))]),o("td",[e._v(e._s(t.location))]),o("td",[e._v(e._s(t.comments))]),o("td",[e._v(e._s(e.getModels()))]),o("td",[e._v(e._s(e.getExpense(t)))])])])])}),o("p",[e._v("Selected job: "+e._s(e.selectedJob.customer)+" "+e._s(e.selectedJob.location))]),e._m(1),e._l(e.modelList,function(t){return o("div",{key:t.id,on:{click:function(o){e.updateSelectedModel(t)}}},[o("table",[o("tr",[o("td",[e._v(e._s(t.firstName))]),o("td",[e._v(e._s(t.lastName))])])])])}),o("p",[e._v("Selected model: "+e._s(e.selectedModel.firstName)+" "+e._s(e.selectedModel.lastName))]),o("div",[o("button",{attrs:{type:"button"},on:{click:function(t){e.addModel()}}},[e._v("Add selected model to selected job")]),o("button",{attrs:{type:"button"},on:{click:function(t){e.addModel()}}},[e._v("Delete selected model from selected job")])])],2)},x=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("table",[o("tr",[o("th",[e._v("Customer")]),o("th",[e._v("Start Date")]),o("th",[e._v("Days")]),o("th",[e._v("Location")]),o("th",[e._v("Comments")]),o("th",[e._v("Models")]),o("th",[e._v("Expenses")])])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("table",[o("tr",[o("th",[e._v("First Name")]),o("th",[e._v("Last Name")])])])}],S={name:"Jobs",data(){return{jobList:[],modelList:[],expenseList:[],jobModelList:[],selectedJob:{},selectedModel:{},expense:0,jobModels:{}}},methods:{updateSelectedJob(e){this.selectedJob=e},updateSelectedModel(e){this.selectedModel=e},getExpense(e){return this.expense=0,this.expenseList.forEach(t=>{t["jobId"]==e["efJobId"]&&(this.expense+=t["amount"])}),this.expense},getModels(){var e="";return this.jobModelList["1"]["models"].forEach(t=>e+=t["firstName"]+" "+t["lastName"]+" "),e},async addModel(){let e=await fetch("https://localhost:44368/api/Jobs/"+this.selectedJob["efJobId"]+"/model/"+this.selectedModel["efModelId"],{method:"POST",credentials:"include",headers:new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"})});e.ok?alert("Model has been added. Please refresh page"):alert("Response not ok "+e.statusText)},async deleteModel(){let e=await fetch("https://localhost:44368/api/Jobs/"+this.selectedJob["efJobId"]+"/model/"+this.selectedModel["efModelId"],{method:"DELETE",credentials:"include",headers:new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"})});e.ok?alert("Model has been delected. Please refresh page"):alert("Response not ok "+e.statusText)}},async created(){let e=await fetch("https://localhost:44368/api/Jobs",{method:"GET",credentials:"include",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}});e.ok?(this.jobList=await e.json(),this.jobList.forEach(async e=>{let t=await fetch("https://localhost:44368/api/Jobs/"+e["efJobId"],{method:"GET",credentials:"include",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}});t.ok&&this.jobModelList.push(await t.json())})):alert("Response not ok "+e.statusText);let t=await fetch("https://localhost:44368/api/Models",{method:"GET",credentials:"include",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}});t.ok?this.modelList=await t.json():alert("Response not ok "+t.statusText);let o=await fetch("https://localhost:44368/api/Expenses",{method:"GET",credentials:"include",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}});o.ok?this.expenseList=await o.json():alert("Response not ok "+o.statusText)}},J=S,T=(o("f355"),Object(i["a"])(J,k,x,!1,null,"cc10df4c",null)),E=T.exports;n["a"].use(u["a"]);var O=new u["a"]({mode:"history",base:"/",routes:[{path:"/",component:M},{path:"/startPage",component:v},{path:"/jobs",component:E}]});n["a"].config.productionTip=!0,new n["a"]({router:O,render:e=>e(c)}).$mount("#app")},"58dd":function(e,t,o){},c534:function(e,t,o){},f355:function(e,t,o){"use strict";var n=o("c534"),s=o.n(n);s.a}});
//# sourceMappingURL=app.b4054653.js.map